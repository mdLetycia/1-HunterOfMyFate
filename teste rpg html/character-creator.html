<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Criação de Personagem</title>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: radial-gradient(circle, #0b0b10, #000);
  color: #e6e1d8;
  font-family: 'Cinzel', serif;
  display: flex;
  height: 100vh;
}

.controls {
  width: 360px;
  padding: 30px;
  border-right: 1px solid #2a2a2a;
}

.controls h2 {
  margin-bottom: 20px;
  letter-spacing: 2px;
}

label {
  display: block;
  margin-top: 15px;
  margin-bottom: 6px;
}

select, input[type="color"] {
  width: 100%;
  height: 40px;
  background: #141418;
  color: #e6e1d8;
  border: 1px solid #5a4a3b;
}

button {
  margin-top: 30px;
  width: 100%;
  padding: 14px;
  background: #5a1f1f;
  border: none;
  color: #fff;
  font-size: 1rem;
  letter-spacing: 2px;
  cursor: pointer;
}

button:hover {
  background: #7a2a2a;
}

.preview {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

canvas {
  background: transparent;
}
</style>
</head>

<body>

<!-- CONTROLES -->
<div class="controls">
  <h2>Aparência</h2>

  <label>Gênero</label>
  <select id="gender">
    <option value="fem">Feminino</option>
    <option value="masc">Masculino</option>
  </select>

  <label>Tom de pele</label>
  <input type="color" id="skinColor" value="#c9a27d">

  <label>Cor do cabelo</label>
  <input type="color" id="hairColor" value="#2b1a12">

  <label>Cor dos olhos</label>
  <input type="color" id="eyeColor" value="#4aa3df">

  <button id="confirm">Confirmar</button>
</div>

<!-- PREVIEW -->
<div class="preview">
  <canvas id="canvas" width="256" height="256"></canvas>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

const genderInput = document.getElementById("gender");
const skinInput = document.getElementById("skinColor");
const hairInput = document.getElementById("hairColor");
const eyeInput  = document.getElementById("eyeColor");
const confirmBtn = document.getElementById("confirm");

let bodyImg = new Image();
let hairImg = new Image();
const eyesImg = new Image();
const tunicImg = new Image();

eyesImg.src = "sprites/eyes_base.png";
tunicImg.src = "sprites/tunic_base.png";

/* ===== RECOLOR CORRETO (MANTÉM SOMBRA) ===== */
function tint(img, color) {
  ctx.drawImage(img, 0, 0);
  ctx.globalCompositeOperation = "multiply";
  ctx.fillStyle = color;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.globalCompositeOperation = "source-over";
}

/* ===== SPRITES POR GÊNERO ===== */
function loadGenderSprites() {
  bodyImg.src =
    genderInput.value === "fem"
      ? "sprites/body_fem_base.png"
      : "sprites/body_masc_base.png";

  hairImg.src =
    genderInput.value === "fem"
      ? "sprites/hair_fem_base.png"
      : "sprites/hair_masc_base.png";

  Promise.all([
    new Promise(r => bodyImg.onload = r),
    new Promise(r => hairImg.onload = r)
  ]).then(drawCharacter);
}

/* ===== DESENHO FINAL ===== */
function drawCharacter() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  tint(bodyImg, skinInput.value);
  tint(hairImg, hairInput.value);
  tint(eyesImg, eyeInput.value);
  ctx.drawImage(tunicImg, 0, 0);
}

/* ===== EVENTOS ===== */
[skinInput, hairInput, eyeInput].forEach(i =>
  i.addEventListener("input", drawCharacter)
);

genderInput.addEventListener("change", loadGenderSprites);

confirmBtn.addEventListener("click", () => {
  const appearance = {
    gender: genderInput.value,
    skin: skinInput.value,
    hair: hairInput.value,
    eyes: eyeInput.value
  };

  localStorage.setItem("playerAppearance", JSON.stringify(appearance));
  window.location.href = "game.html";
});

/* ===== INIT ===== */
Promise.all([
  new Promise(r => eyesImg.onload = r),
  new Promise(r => tunicImg.onload = r),
]).then(loadGenderSprites);
</script>

</body>
</html>


<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Character Creator</title>

<style>
body {
  margin: 0;
  background: #0b0b0e;
  color: #e0dccc;
  font-family: serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.hidden { display: none; }

/* CUTSCENE */
.cutscene {
  position: fixed;
  inset: 0;
  background: black;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  z-index: 10;
}

.cutscene p {
  font-size: 1.5rem;
  max-width: 600px;
  opacity: 0;
  transition: opacity 1.5s;
}

/* CREATOR */
.creator {
  background: #141418;
  padding: 30px;
  border-radius: 10px;
  width: 420px;
}

h1 {
  text-align: center;
  margin-bottom: 20px;
}

.section {
  margin-bottom: 15px;
}

label {
  display: block;
  margin-bottom: 5px;
}

.preview {
  width: 120px;
  height: 160px;
  margin: 0 auto 20px;
  position: relative;
}

/* preview simples */
.body {
  width: 100%;
  height: 100%;
  background: #bbb;
  border-radius: 20px;
}

.hair {
  position: absolute;
  top: 0;
  width: 100%;
  height: 40px;
}

.eyes {
  position: absolute;
  top: 55px;
  left: 35px;
  width: 50px;
  height: 10px;
  display: flex;
  justify-content: space-between;
}

.eye {
  width: 10px;
  height: 10px;
  border-radius: 50%;
}

button {
  width: 100%;
  padding: 10px;
  background: #6e5c3e;
  color: black;
  border: none;
  font-size: 1rem;
  cursor: pointer;
}

button:hover {
  background: #8a734f;
}
</style>
</head>

<body>

<!-- CUTSCENE -->
<div id="cutscene" class="cutscene">
  <p id="cutsceneText">Você sente o frio da terra sob seus pés...</p>
</div>

<!-- CREATOR -->
<div id="creator" class="creator hidden">
  <h1>Quem é você?</h1>

  <div class="preview">
    <div id="body" class="body"></div>
    <div id="hair" class="hair"></div>
    <div class="eyes">
      <div id="eye1" class="eye"></div>
      <div id="eye2" class="eye"></div>
    </div>
  </div>

  <div class="section">
    <label>Gênero</label>
    <select id="gender">
      <option value="fem">Feminino</option>
      <option value="masc">Masculino</option>
    </select>
  </div>

  <div class="section">
    <label>Tom de pele</label>
    <input type="color" id="skin" value="#bfbfbf">
  </div>

  <div class="section">
    <label>Cabelo</label>
    <input type="color" id="hairColor" value="#2b1a12">
  </div>

  <div class="section">
    <label>Olhos</label>
    <input type="color" id="eyesColor" value="#4aa3df">
  </div>

  <button id="confirm">Confirmar</button>
</div>

<script>
/* CUTSCENE */
const cutscene = document.getElementById("cutscene");
const text = document.getElementById("cutsceneText");
const creator = document.getElementById("creator");

const lines = [
  "Você sente o frio da terra sob seus pés...",
  "Não lembra de quem é.",
  "Nem como veio parar aqui.",
  "Mas sua história ainda não acabou."
];

let i = 0;

function nextLine() {
  text.style.opacity = 0;
  setTimeout(() => {
    text.textContent = lines[i];
    text.style.opacity = 1;
    i++;
    if (i >= lines.length) {
      setTimeout(() => {
        cutscene.classList.add("hidden");
        creator.classList.remove("hidden");
      }, 2000);
    }
  }, 500);
}

cutscene.addEventListener("click", nextLine);
document.addEventListener("keydown", nextLine);
nextLine();

/* PREVIEW */
const body = document.getElementById("body");
const hair = document.getElementById("hair");
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Criação de Personagem</title>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: radial-gradient(circle, #0b0b10, #000);
  color: #e6e1d8;
  font-family: 'Cinzel', serif;
  display: flex;
  height: 100vh;
}

.controls {
  width: 360px;
  padding: 30px;
  border-right: 1px solid #2a2a2a;
}

.controls h2 {
  margin-bottom: 20px;
  letter-spacing: 2px;
}

label {
  display: block;
  margin-top: 15px;
  margin-bottom: 6px;
}

select, input[type="color"] {
  width: 100%;
  height: 40px;
  background: #141418;
  color: #e6e1d8;
  border: 1px solid #5a4a3b;
}

button {
  margin-top: 30px;
  width: 100%;
  padding: 14px;
  background: #5a1f1f;
  border: none;
  color: #fff;
  font-size: 1rem;
  letter-spacing: 2px;
  cursor: pointer;
}

button:hover {
  background: #7a2a2a;
}

.preview {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

canvas {
  background: transparent;
}
</style>
</head>

<body>

<!-- CONTROLES -->
<div class="controls">
  <h2>Aparência</h2>

  <label>Gênero</label>
  <select id="gender">
    <option value="fem">Feminino</option>
    <option value="masc">Masculino</option>
  </select>

  <label>Tom de pele</label>
  <input type="color" id="skinColor" value="#c9a27d">

  <label>Cor do cabelo</label>
  <input type="color" id="hairColor" value="#2b1a12">

  <button id="confirm">Confirmar</button>
</div>

<!-- PREVIEW -->
<div class="preview">
  <canvas id="canvas" width="256" height="256"></canvas>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

const genderInput = document.getElementById("gender");
const skinInput   = document.getElementById("skinColor");
const hairInput   = document.getElementById("hairColor");
const confirmBtn  = document.getElementById("confirm");

/* SPRITES (URLS) */
const faceImg = new Image();
const hairImg = new Image();

/* ===== FUNÇÃO DE TINT (MANTÉM SOMBRAS) ===== */
function tint(img, color) {
  ctx.drawImage(img, 0, 0);
  ctx.globalCompositeOperation = "multiply";
  ctx.fillStyle = color;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.globalCompositeOperation = "source-over";
}

/* ===== CARREGAR SPRITES POR GÊNERO ===== */
function loadGenderSprites() {
  faceImg.src =
    genderInput.value === "fem"
      ? "https://SEU_LINK_AQUI/face_fem_base.png"
      : "https://SEU_LINK_AQUI/face_masc_base.png";

  hairImg.src =
    genderInput.value === "fem"
      ? "https://SEU_LINK_AQUI/hair_fem_base.png"
      : "https://SEU_LINK_AQUI/hair_masc_base.png";

  Promise.all([
    new Promise(r => faceImg.onload = r),
    new Promise(r => hairImg.onload = r)
  ]).then(drawCharacter);
}

/* ===== DESENHO FINAL (APENAS ROSTO) ===== */
function drawCharacter() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  tint(faceImg, skinInput.value);
  tint(hairImg, hairInput.value);
}

/* ===== EVENTOS ===== */
[skinInput, hairInput].forEach(i =>
  i.addEventListener("input", drawCharacter)
);

genderInput.addEventListener("change", loadGenderSprites);

confirmBtn.addEventListener("click", () => {
  const appearance = {
    gender: genderInput.value,
    skin: skinInput.value,
    hair: hairInput.value
  };

  localStorage.setItem("playerAppearance", JSON.stringify(appearance));
  window.location.href = "game.html";
});

/* ===== INIT ===== */
loadGenderSprites();
</script>

</body>
</html>
